import{$ as W,N as j,S as w,a as o,b as f,da as b,ea as v,tb as y,ub as u}from"./chunk-QOUCQRC5.js";function I(n){let t=y(()=>n());return K(t)?new Proxy(n,{get(e,i){return i in t?(b(e[i])||Object.defineProperty(e,i,{value:u(()=>e()[i]),configurable:!0}),I(e[i])):e[i]}}):n}var P=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function K(n){if(n===null||typeof n!="object"||O(n))return!1;let t=Object.getPrototypeOf(n);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(P.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function O(n){return typeof n?.[Symbol.iterator]=="function"}var A=new WeakMap,r=Symbol("STATE_SOURCE");function d(n,...t){n[r].update(e=>t.reduce((i,s)=>o(o({},i),typeof s=="function"?s(i):s),e)),U(n)}function H(n){return n[r]()}function F(n){return A.get(n[r])||[]}function U(n){let t=F(n);for(let e of t){let i=y(()=>H(n));e(i)}}function M(...n){let t=[...n],e=typeof t[0]=="function"?{}:t.shift(),i=t;return(()=>{class c{constructor(){let a=i.reduce((l,C)=>C(l),q()),{stateSignals:h,props:x,methods:T,hooks:E}=a,m=o(o(o({},h),x),T);this[r]=a[r];for(let l of Reflect.ownKeys(m))this[l]=m[l];let{onInit:g,onDestroy:S}=E;g&&g(),S&&w(W).onDestroy(S)}static \u0275fac=function(h){return new(h||c)};static \u0275prov=j({token:c,factory:c.\u0275fac,providedIn:e.providedIn||null})}return c})()}function q(){return{[r]:v({}),stateSignals:{},props:{},methods:{},hooks:{}}}function z(n){return t=>{let e=n(o(o(o({[r]:t[r]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(e),f(o({},t),{props:o(o({},t.props),e)})}}function D(n){return z(n)}function k(n){return t=>{let e=n(o(o(o({[r]:t[r]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(e),f(o({},t),{methods:o(o({},t.methods),e)})}}function R(n){return t=>{let e=typeof n=="function"?n():n,i=Reflect.ownKeys(e);t[r].update(c=>o(o({},c),e));let s=i.reduce((c,p)=>{let a=u(()=>t[r]()[p]);return f(o({},c),{[p]:I(a)})},{});return f(o({},t),{stateSignals:o(o({},t.stateSignals),s)})}}var B=[],$=M({providedIn:"root"},R({myWishlist:B}),D(n=>({myWishlistCount:u(()=>n.myWishlist().length)})),k(n=>({addToWishlist:(t,e)=>{t.stopPropagation();let i=n.myWishlist().some(s=>s.id===e.id);d(n,{myWishlist:i?n.myWishlist().filter(s=>s.id!==e.id):[...n.myWishlist(),e]})},removeFromWishlist:t=>d(n,{myWishlist:n.myWishlist().filter(e=>e.id!==t)}),emptyWishlist:()=>d(n,{myWishlist:[]})})));export{$ as a};
